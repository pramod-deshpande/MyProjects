

<MudCard Elevation="4" Outlined="true" Class="rounded my-8">
    <MudCardContent Class="d-flex flex-column gap-4">
        <MudContainer Class="d-flex justify-space-between">
            <MudLink OnClick="@(()=>Navigation.NavigateTo($"/create/{project.Id}"))" Typo="Typo.h6" Color="Color.Dark">@project.ProjectName</MudLink>
            <MudMenu Label="@project.Category">
                <ActivatorContent>
                    <MudChip Size="Size.Small" Variant="Variant.Text" Color="CustomColor">@project.Category</MudChip>
                </ActivatorContent>
                <ChildContent>
                    @foreach (var item in Constants.Filters)
                    {
                        <MudMenuItem OnClick="@(()=>ChangeCategory(item))" >@item</MudMenuItem>
                    }
                </ChildContent>

            </MudMenu>
        </MudContainer>
        <MudContainer>
            <MudLink Typo="Typo.caption" Href="@project.GithubLink">@project.GithubLink</MudLink>

        </MudContainer>
    </MudCardContent>
</MudCard>


@code {
    [Parameter] public MyProject project { get; set; }
    [Parameter] public Color CustomColor { get; set; }
    DateTime placeholderDate = new DateTime(0001, 01, 01);


    private async Task ChangeCategory(string category)
    {
        if(category.Equals(Constants.Filter_Completed))
        {
            project.DraftCompletionDate = DateTime.Now;
            project.IsIterationCompleted = true;
        }
        project.Category = category;
        await _db.SaveItemAsync(project);
        _project.CallRequestRefresh();
        StateHasChanged();
    }
}
